Контактная колодка двери. 16 контактов.

Со стороны двери, все нижние провода чёрные, считаем слева.

3 - питание замка. Постоянно 0, при открытии - импульс +12 В, замок щёлкает и открывается.
5 - постоянно +12 В, служит подтяжкой для всх информационных контактов.
6 - кнопка открытия. Постоянно +12 В, при нажатии - 0.
7 - датчик замка. Замок открыт - 0, закрыт - +12 В (медленно).
8 - датчик замка. Замок открыт - +12 В, закрыт - 0 (быстро).


Алгоритм работы

функция "сжать сцепление" = включаем мотор сцепления на сжатие, ждём 1 сек, выключаем мотор сцепления.
функция "разжать сцепление" = включаем мотор сцепления на разжатие, ждём 1 сек, выключаем мотор сцепления.


Начальное состояние. На главном моторе и моторе сцепления нет напряжения, сцепление разжато.

При появлении напряжения на контакте 8 выжидаем 500мс, "сжимаем сцепление", включаем главный мотор на подъём.

При увеличении напряжения на потенциометрическом датчике положения до x отключаем главный мотор, "разжимаем сцепление".

При появлении напряжения на кнопке закрытия "сжимаем сцепление", включаем главный мотор на спуск.

При падении напряжения на потенциометрическом датчике положения до x, либо при пропадании напряжения на контакте 8 отключаем главный мотор, "разжимаем сцепление".

Параллельно - если ток превысил y, то прекратить всё, и проверить прошлое состояние. Если поднимались - отжать сцепление, если опускались - подняться и отжать сцепление.